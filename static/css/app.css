:root{
  --bg:#000; --panel:#0a0a0b; --text:#e7e7ea; --muted:#a7a7b0; --line:#26272e; --hover:#1a1b1f; --accent:#8ab4ff;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font-family:Segoe UI,Inter,Roboto,system-ui,Arial,sans-serif}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid var(--line);background:#0b0b0c;position:sticky;top:0;z-index:5}
.brand{display:flex;align-items:center;gap:10px}
.logo{width:24px;height:24px;border-radius:6px}
.app-title{font-size:14px;margin:0;color:#e2e2e5}
.personality{display:flex;align-items:center;gap:8px}
.personality select,.ghost{background:#111215;border:1px solid var(--line);color:var(--text);padding:6px 10px;border-radius:10px}
.personality .ghost:hover{background:var(--hover)}
.layout{display:grid;grid-template-columns:1fr 420px;gap:1px;height:calc(100vh - 54px)}
@media (max-width: 1024px){.layout{grid-template-columns:1fr}}
.chat{display:flex;flex-direction:column;height:100%}
.messages{flex:1;overflow:auto;padding:16px;display:flex;flex-direction:column;gap:12px}
.msg{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:12px;max-width:900px}
.msg.user{align-self:flex-end;background:#101114}
.msg.assistant{align-self:flex-start}
.composer{display:flex;gap:8px;border-top:1px solid var(--line);padding:10px;background:#0b0b0c}
#input{flex:1;resize:none;border-radius:10px;border:1px solid var(--line);background:#111215;color:var(--text);padding:10px}
#sendBtn{border:1px solid var(--line);background:#111215;color:var(--text);border-radius:10px;padding:10px 14px}
#sendBtn:hover{background:var(--hover)}
.agent-panel{border-left:1px solid var(--line);background:#070708;display:flex;flex-direction:column}
.agent-header{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--line)}
.agent-actions button{margin-left:6px;border:1px solid var(--line);background:#111215;color:var(--text);border-radius:10px;padding:8px 12px}
.agent-actions button:hover{background:var(--hover)}
.agent-view{display:grid;grid-template-columns:1fr 240px;gap:10px;padding:10px}
.agent-stream{position:relative;border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#101114;min-height:300px}
#agentFrame{display:block;width:100%;height:auto}
#agentOverlay{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none}
.agent-logs{border:1px solid var(--line);border-radius:12px;padding:8px;background:#0b0b0c;min-height:300px}
.agent-logs h4{margin:8px 0}
.agent-logs pre{white-space:pre-wrap;font-size:12px;color:var(--muted)}
.agent-tip{border-top:1px solid var(--line);padding:8px 12px;color:var(--muted);font-size:12px}

/* ===== Live Agent as Chat Message (ChatGPT-like) ===== */
.msg.agent-live {
  padding: 0;
  overflow: hidden;
}

.live-wrap {
  display: grid;
  grid-template-rows: auto 1fr;
  width: min(900px, 100%);
  border: 1px solid var(--line);
  border-radius: 12px;
  background: #0b0b0c;
  overflow: hidden;
}

.live-header {
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; border-bottom:1px solid var(--line);
  background:#0b0b0c;
}
.live-header .status { font-size:12px; color:var(--muted) }
.live-header .actions { display:flex; gap:8px }
.live-header .actions button{
  border:1px solid var(--line); background:#111215; color:var(--text);
  border-radius:10px; padding:6px 10px;
}
.live-header .actions button:hover{ background:var(--hover) }

.live-stage {
  position: relative; background:#000; aspect-ratio: 16/9; /* bonito en chat */
}
.live-stage img.frame {
  width:100%; height:100%; object-fit:contain; display:block;
  background:#000;
}
.live-stage canvas.overlay {
  position:absolute; inset:0; pointer-events:none;
}
.live-cursor {
  position:absolute; width:24px; height:36px; transform:translate(-6px,-2px);
  will-change: transform; image-rendering: -webkit-optimize-contrast;
}
.live-tooltip {
  position:absolute; max-width:70%; transform: translate(-50%, 6px);
  background:#0a0a0b; color:#e7e7ea; border:1px solid var(--line);
  padding:6px 8px; border-radius:8px; font-size:12px; white-space:nowrap;
  pointer-events:none; box-shadow:0 2px 12px rgba(0,0,0,.35);
}

.live-footer {
  display:flex; align-items:center; justify-content:space-between;
  padding:6px 10px; border-top:1px solid var(--line); background:#0b0b0c;
  font-size:12px; color:var(--muted);
}

/* Bot√≥n del topbar para conectar (se muestra solo en modo agente) */
#agentConnectBtn{ display:none }
